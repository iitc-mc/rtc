<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Round-the-Clock (RTC) Solar, Wind, and Battery Hybrids</title>
    
    <link href="3p/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" />
    <link href="3p/bootstrap/icons/1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="3p/nouislider/15.2.0/nouislider.min.css" rel="stylesheet" />

    <link href="appl.css" rel="stylesheet" />
    <link href="appl.svg" rel="shortcut icon" />

</head>

<body>

    <div id="map-container">
        <div class="info-hint text-secondary">Click anywhere to place a marker</div>
    </div>

    <form id="offcanvas_form">
        <div class="offcanvas offcanvas-end offcanvas-fullscreen" tabindex="-1" id="offcanvas">
            <div class="offcanvas-header" style="margin: 0; padding: 2rem;">
                <h5 class="offcanvas-title text-secondary"></h5>
                <button type="button" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body" style="margin: 0; padding: 1rem; border-top: 1px solid #eee;">
                <div class="scrollable" style="height: 100%; padding: 1rem; overflow-x: hidden; overflow-y: auto;">
                    <div class="content">

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-sun"></i> &nbsp; Solar PV</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="iCapa_solr" class="form-label">Installed Capacity - MW</label>
                                    <input type="number" class="form-control" id="iCapa_solr" value="100" data-expected="float" data-mini="0" data-maxi="1000" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="cCost_solr" class="form-label">CAPEX - USD per kW</label>
                                    <input type="number" class="form-control" id="cCost_solr" value="658" data-expected="float" data-mini="300" data-maxi="3000" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="oCost_t_cCost_solr" class="form-label">OPEX to CAPEX</label>
                                    <input type="number" class="form-control" id="oCost_t_cCost_solr" value="0.02" data-expected="float" data-mini="0.005" data-maxi="0.05" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="fOpts_solr" checked>
                                        <label class="form-check-label" for="fOpts_solr">Firming Option</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-wind"></i> &nbsp; Wind</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="iCapa_wind" class="form-label">Installed Capacity - MW</label>
                                    <input type="number" class="form-control" id="iCapa_wind" value="0" data-expected="float" data-mini="0" data-maxi="1000" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="cCost_wind" class="form-label">CAPEX - USD per kW</label>
                                    <input type="number" class="form-control" id="cCost_wind" value="1034" data-expected="float" data-mini="600" data-maxi="6000" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="oCost_t_cCost_wind" class="form-label">OPEX to CAPEX</label>
                                    <input type="number" class="form-control" id="oCost_t_cCost_wind" value="0.03" data-expected="float" data-mini="0.005" data-maxi="0.05" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="fOpts_wind" />
                                        <label class="form-check-label" for="fOpts_wind">Firming Option</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-battery-half"></i> &nbsp; BESS</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="iCapa_bess" class="form-label">Installed Capacity - MWh</label>
                                    <input type="number" class="form-control" id="iCapa_bess" value="0" data-expected="float" data-mini="0" data-maxi="12000" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="cCost_bess" class="form-label">CAPEX - USD per kWh</label>
                                    <input type="number" class="form-control" id="cCost_bess" value="171" data-expected="float" data-mini="50" data-maxi="500" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="oCost_t_cCost_bess" class="form-label">OPEX to CAPEX</label>
                                    <input type="number" class="form-control" id="oCost_t_cCost_bess" value="0.025" data-expected="float" data-mini="0.005" data-maxi="0.05" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="fOpts_bess" checked>
                                        <label class="form-check-label" for="fOpts_bess">Firming Option</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 0.75rem;"></div>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="shBOS_bess" class="form-label">BOS Share of CAPEX</label>
                                    <input type="number" class="form-control" id="shBOS_bess" value="0.3" data-expected="float" data-mini="0" data-maxi="0.5" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="hStrg_bess" class="form-label">Hours of Storage</label>
                                    <input type="number" class="form-control" id="hStrg_bess" value="4" data-expected="integer" data-mini="2" data-maxi="12" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="rtEff_bess" class="form-label">Round-Trip Efficiency</label>
                                    <input type="number" class="form-control" id="rtEff_bess" value="0.9" data-expected="float" data-mini="0.75" data-maxi="0.95" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    &nbsp;
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-buildings"></i> &nbsp; Co-located Plant</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="cDura" class="form-label">Construction Duration - Years</label>
                                    <input type="number" class="form-control" id="cDura" value="1" data-expected="integer" data-mini="1" data-maxi="5" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="oDura" class="form-label">Operation Duration - Years</label>
                                    <input type="number" class="form-control" id="oDura" value="20" data-expected="integer" data-mini="10" data-maxi="40" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="kCost" class="form-label">Discount Rate</label>
                                    <input type="number" class="form-control" id="kCost" value="0.05" data-expected="float" data-mini="0.01" data-maxi="0.2" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="rTarg" class="form-label">Reliability Target</label>
                                    <input type="number" class="form-control" id="rTarg" value="0.95" data-expected="float" data-mini="0.85" data-maxi="1" />
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-gear"></i> &nbsp; Simulation</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="ninj" class="form-label">Renewables.ninja API Key</label>
                                    <input type="text" class="form-control" id="ninj" value="" data-expected="text" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem;">
                                    <label for="ieso" class="form-label">Linear Optimiser API Key</label>
                                    <input type="text" class="form-control" id="ieso" value="" data-expected="text" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem; text-align: center;">
                                    <button type="button" id="simulate" class="btn btn-outline-secondary">
                                        <i class="bi bi-play"></i> Simulate
                                    </button>
                                    <div style="min-height: 0.75rem;"></div>
                                    <div class="progress" role="progressbar">
                                        <div class="progress-bar bg-secondary" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="padding: 1.5rem; text-align: center; color: #999;">
                                    <div>Data retrieval and linear optimisation usually take a minute or two</div>
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-speedometer2"></i> &nbsp; Results</h5>

                        <div class="row d-flex" style="background: #f6f6f6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-12">
                                <div style="padding: 1.5rem;">
                                    <table class="table table-bordered table-striped table-sm">
                                        <thead class="table-light">
                                            <tr>
                                            <th scope="col">Metric</th>
                                            <th scope="col">Value</th>
                                            <th scope="col">Unit</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Firming Solar PV</td>
                                                <td class="result firm_solr"></td>
                                                <td>MW</td>
                                            </tr>
                                            <tr>
                                                <td>Firming Wind</td>
                                                <td class="result firm_wind"></td>
                                                <td>MW</td>
                                            </tr>
                                            <tr>
                                                <td>Firming BESS</td>
                                                <td class="result firm_bess"></td>
                                                <td>MWh</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Firm LCOE</strong></td>
                                                <td><strong class="result cost"></strong></td>
                                                <td><strong>USD/MWh</strong></td>
                                            </tr>
                                            <tr>
                                                <td class="ps-4">LCOE</td>
                                                <td class="result cost_lcoe"></td>
                                                <td>USD/MWh</td>
                                            </tr>
                                            <tr>
                                                <td class="ps-4">Firming Markup</td>
                                                <td class="result cost_firm"></td>
                                                <td>USD/MWh</td>
                                            </tr>
                                            <tr>
                                                <td class="ps-5">Attributed to Solar PV</td>
                                                <td class="result cost_firm_solr"></td>
                                                <td>USD/MWh</td>
                                            </tr>
                                            <tr>
                                                <td class="ps-5">Attributed to Wind</td>
                                                <td class="result cost_firm_wind"></td>
                                                <td>USD/MWh</td>
                                            </tr>
                                            <tr>
                                                <td class="ps-5">Attributed to BESS</td>
                                                <td class="result cost_firm_bess"></td>
                                                <td>USD/MWh</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div style="min-height: 0.375rem;"></div>
                                    <div class="text-center">
                                        <button type="button" id="summary_tabl" class="btn btn-sm btn-outline-secondary get_data_btn" data-csv="" disabled>
                                            <i class="bi bi-cloud-download"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="min-height: 1.5rem;"></div>

                        <h5 class="text-secondary"><i class="bi bi-graph-up"></i> &nbsp; Unit Commitment</h5>

                        <div class="row d-flex" style="border: solid 1px #e6e6e6; border-radius: var(--bs-border-radius);">
                            <div class="col-md-12">
                                <div id="chart-container" style="height: 450px; width: 100%;"></div>
                            </div>
                        </div>

                        <div style="min-height: 15rem;"></div>

                    </div>
                </div>
            </div>
        </div>
    </form>

    <div class="modal fade" id="msgbox" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-2">

        <div class="modal-dialog modal-dialog-centered">

            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" style="margin: 0;"><i class="bi bi-info"></i></h5>
                    <button type="button" class="btn-close" title="Close" onclick="msgbox.hide();">
                    </button>
                </div>

                <div class="modal-body" style="padding: 3rem;">
                    <div class="msgboxContent"></div>
                    <div style="min-height: 1.5rem;"></div>
                </div>

            </div>

        </div>

    </div>

    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>google.charts.load("current", { packages: ["corechart"] });</script>

    <script src="3p/d3/7.7.0/d3.min.js"></script>
    <script src="3p/topojson-client/3.1.0/topojson-client.min.js"></script>
    <script src="3p/jquery/3.6.0/jquery.min.js"></script>
    <script src="3p/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
    <script src="3p/nouislider/15.2.0/nouislider.min.js"></script>
    <script src="3p/filesaver/200522/FileSaver.min.js"></script>
    <script src="3p/smartquotes/2.3.2/smartquotes.js"></script>

    <script src="appl.js"></script>

</body>

</html>
